<!--
  VC‚Äëgrade Landing Page (Dark/Light Combo)
  -------------------------------------------------
  ‚Ä¢ All in one place: index.html (links external style.css below)
  ‚Ä¢ Smooth, tasteful animations (no heavy libs)
  ‚Ä¢ Dark/Light auto + toggle
  ‚Ä¢ Sticky nav, premium hero, trust bar, feature grid, social proof, CTA
  ‚Ä¢ Mobile‚Äëfirst and accessible

  üëâ After you paste this into your project, also create css/style.css using the CSS at the end of this doc.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BeyondDEX ‚Äî Trade Smarter. Together.</title>
  <meta name="description" content="A next‚Äëgen crypto dashboard with deep wallet analytics, whale tracking, and real‚Äëtime exchange flows. Join the waitlist." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="/favicon.ico" />
</head>
<body>
  <!-- ====== NAV ====== -->
  <header class="nav">
    <div class="container nav__inner">
      <a href="#home" class="brand">
      <img src="/assets/bdx.png" alt="BeyondDEX logo" class="brand__logo logo--light" />
      <img src="/assets/bdx-white.png" alt="BeyondDEX logo" class="brand__logo logo--dark" />
      <span class="brand__name">BeyondDEX</span>
      </a>

     <nav class="nav__links" aria-label="Primary">
      <a href="#home">Home</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#affiliate">Affiliate</a>
    </nav>

      <div class="nav__actions">
  <button class="btn btn--ghost" id="themeToggle" aria-label="Toggle theme">‚òæ</button>

  <!-- Shown when logged OUT -->
  <span id="authLinks" class="auth-links">
    <a href="/auth.html" class="auth-link">Login</a>
    <span class="dot">‚Ä¢</span>
    <a href="/auth.html#register" class="auth-link">Register</a>
  </span>

  <!-- Shown when logged IN -->
  <div id="userMenu" class="profile-wrapper" hidden>
    <button id="profileBtn" class="profile-circle" aria-haspopup="true" aria-expanded="false" aria-label="Open profile menu">U</button>
    <div id="profileMenu" class="profile-menu" hidden>
      <button id="logoutBtn" type="button">Log out</button>
    </div>
  </div>

  <a class="btn btn--primary" href="/affiliateSignUp.html">Join Waitlist</a>
</div>
      <button class="nav__hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
        <span></span><span></span><span></span>
      </button>
    </div>

    <div class="nav__mobile" id="mobileMenu" hidden>
      <a href="/index.html">Home</a>
      <a href="/dashboard.html">Dashboard</a>
      <a href="/affiliateSignUp.html">Affiliate</a>
      <a class="btn btn--primary" href="affiliateSignUp.html">Join Waitlist</a>
      <div id="mobileAuthLinks">
        <a href="/auth.html">Login</a>
        <a href="/auth.html#register">Register</a>
      </div>
    </div>
  </header>

  <!-- ====== HERO ====== -->
  <section class="hero">
    <div class="hero__bg" aria-hidden="true">
      <div class="glow glow--1"></div>
      <div class="glow glow--2"></div>
      <div class="mesh"></div>
    </div>

    <div class="container hero__inner">
      <div class="hero__copy reveal">
        <h1>Trade smarter.<br><span class="accent">See the flows before the crowd.</span></h1>
        <p class="lead">Institutional‚Äëgrade wallet analytics, exchange inflow/outflow radar, and whale alerts‚Äîwrapped in a clean, fast dashboard.</p>
        <form id="waitlist" class="waitlist reveal" action="#" method="post">
          <label class="sr-only" for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@protrader.xyz" required />
          <button class="btn btn--primary" type="submit">Get Early Access</button>
          <p class="tiny">No spam. Early users get Founder perks.</p>
        </form>
      </div>

      <div class="hero__media reveal">
        <!-- Replace src with your actual dashboard screenshot -->
        <div class="mockup">
          <img src="/assets/dashboard-fix.png" alt="BeyondDEX dashboard preview" />
          <div class="mockup__shine" aria-hidden="true"></div>
        </div>
      </div>
    </div>

    <div class="trust container reveal" aria-label="As seen on / trusted by">
      <div class="marquee">
        <span>On‚Äëchain ‚Ä¢ Real‚Äëtime ‚Ä¢ Low‚Äëlatency ‚Ä¢ De‚Äërisk ‚Ä¢ Alpha ‚Ä¢ Repeat</span>
      </div>
    </div>
  </section>

  <!-- ====== FEATURES ====== -->
  <section id="features" class="section">
    <div class="container">
      <header class="section__head reveal">
        <h2>Built for speed, clarity, and conviction.</h2>
        <p class="sub">Every decision should feel obvious. We surface the signal and mute the noise.</p>
      </header>

      <div class="grid features">
        <article class="card reveal">
          <h3>Whale Watch</h3>
          <p>Real‚Äëtime alerts on high‚Äëimpact moves across top chains, tagged by exchange and entity.</p>
        </article>
        <article class="card reveal">
          <h3>Exchange Flows</h3>
          <p>Instant read of inflows/outflows so you can gauge pressure and positioning.</p>
        </article>
        <article class="card reveal">
          <h3>Smart Wallet Tracker</h3>
          <p>Follow proven wallets, mirror strategies, and build watchlists with risk controls.</p>
        </article>
        <article class="card reveal">
          <h3>Macro + On‚Äëchain</h3>
          <p>Context that matters: key events, liquidity, funding, and positioning in one view.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- ====== INSIGHTS STRIP ====== -->
  <section id="insights" class="strip">
    <div class="container strip__inner reveal">
      <div class="strip__copy">
        <h3>Daily insight briefs</h3>
        <p>Concise recaps, levels, and catalysts, purpose‚Äëbuilt for fast execution. Delivered to your dashboard.</p>
      </div>
      <a href="#waitlist" class="btn btn--ghost">Get the Briefs</a>
    </div>
  </section>

  <!-- ====== COMMUNITY / SOCIAL PROOF ====== -->
  <section id="community" class="section">
    <div class="container">
      <header class="section__head reveal">
        <h2>Not just data‚Äîan edge‚Äëseeking community.</h2>
        <p class="sub">Sharpen together with playbooks, AMAs, and collaborative research drops.</p>
      </header>

      <div class="grid quotes">
        <figure class="quote reveal">
          <blockquote>‚ÄúThe only crypto dashboard I actually check before placing size.‚Äù</blockquote>
          <figcaption>‚Äî Early user, ex‚ÄëHF</figcaption>
        </figure>
        <figure class="quote reveal">
          <blockquote>‚ÄúThe flow view called the top before Binance listings hit CT.‚Äù</blockquote>
          <figcaption>‚Äî Quant trader</figcaption>
        </figure>
        <figure class="quote reveal">
          <blockquote>‚ÄúClean, fast, and the alerts are worth the fee alone.‚Äù</blockquote>
          <figcaption>‚Äî Options lead</figcaption>
        </figure>
      </div>

      <div class="cta reveal">
        <a class="btn btn--primary btn--xl" href="#waitlist">Reserve Your Handle</a>
        <p class="tiny">Founder pricing for first 1,000 signups.</p>
      </div>
    </div>
  </section>

  <!-- ====== FAQ ====== -->
  <section id="faq" class="section">
    <div class="container">
      <header class="section__head reveal">
        <h2>Questions, answered.</h2>
      </header>
      <div class="faq grid">
        <details class="reveal">
          <summary>Is there a free trial?</summary>
          <p>Yes. Early users get a 14‚Äëday trial during private beta.</p>
        </details>
        <details class="reveal">
          <summary>Which chains are supported?</summary>
          <p>ETH mainnet at launch, with fast‚Äëfollow for Arbitrum, Base, and Solana.</p>
        </details>
        <details class="reveal">
          <summary>Do you offer team plans?</summary>
          <p>Yes. Team seats and SSO are available for funds and desks.</p>
        </details>
      </div>
    </div>
  </section>

  <!-- ====== FOOTER ====== -->
  <footer class="footer">
    <div class="container footer__inner">
      <div class="footer__brand">
        <span class="brand__glyph">‚ñ±</span>
        <strong>BeyondDEX</strong>
      </div>
      <nav class="footer__links">
        <a href="/index.html">Home</a>
      <a href="/dashboard.html">Dashboard</a>
      <a href="/affiliateSignUp.html">Affiliate</a>
        <a href="mailto:team@beyonddex.com">Contact</a>
      </nav>
      <p class="tiny">¬© <span id="year"></span> BeyondDEX. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Theme toggle (respects system by default)
    const root = document.documentElement;
    const toggle = document.getElementById('themeToggle');
    const stored = localStorage.getItem('theme');
    if (stored) root.dataset.theme = stored;
    toggle.addEventListener('click', () => {
      const next = root.dataset.theme === 'light' ? 'dark' : 'light';
      root.dataset.theme = next;
      localStorage.setItem('theme', next);
      toggle.textContent = next === 'light' ? '‚òæ' : '‚òÄ';
    });

    // Mobile nav
    const burger = document.getElementById('hamburger');
    const mobile = document.getElementById('mobileMenu');
    burger.addEventListener('click', () => {
      const open = mobile.hasAttribute('hidden') ? false : true;
      burger.setAttribute('aria-expanded', String(!open));
      mobile.toggleAttribute('hidden');
      document.body.classList.toggle('no-scroll');
    });

    // Reveal on scroll
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) e.target.classList.add('reveal--in');
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));

    // ==== Firestore + Brevo confirmation integration ====
if (!firebase.apps.length) {
  firebase.initializeApp({
    apiKey: "AIzaSyBbz_G9FNjS4cl0oi1221C3ZOACyZzEgK8",
    authDomain: "beyonddex-be653.firebaseapp.com",
    projectId: "beyonddex-be653",
    storageBucket: "beyonddex-be653.firebasestorage.app",
    messagingSenderId: "687411546401",
    appId: "1:687411546401:web:ec71401e52751d3e121660",
    measurementId: "G-6SH111LB7J"
  });
}
const auth = firebase.auth();
const db   = firebase.firestore();

const waitlistForm  = document.getElementById('waitlist');
const waitlistBtn   = waitlistForm.querySelector('button');
const waitlistEmail = document.getElementById('email');

function isValidEmail(v){ return /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(v); }

async function sha256(str) {
  const data = new TextEncoder().encode(str);
  const hash = await crypto.subtle.digest('SHA-256', data);
  return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
}

waitlistForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  const raw = (waitlistEmail.value || "").trim().toLowerCase();
  if (!isValidEmail(raw)) {
    waitlistEmail.focus();
    waitlistEmail.setAttribute('aria-invalid', 'true');
    alert("Please enter a valid email.");
    return;
  }

  waitlistBtn.disabled = true;
  waitlistBtn.textContent = "Adding...";

  try {
    // Use hashed doc id so duplicates overwrite instead of duplicating
    const id  = await sha256(raw);
    const uid = auth?.currentUser?.uid || null;

    await db.collection("waitlist").doc(id).set({
      email: raw,
      uid,
      source: "landing",
      userAgent: navigator.userAgent,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    }, { merge: true });

    // ‚úÖ No fetch() here ‚Äî the Firestore trigger will send the email

    // Show success state inline + checkmark reset button
waitlistForm.outerHTML = `
  <div class="card success-card"
       style="position:relative;margin-top:.8rem;padding:1rem 3.25rem 1rem 1rem;
              border:1px solid var(--border);border-radius:14px;background:var(--card);
              box-shadow:var(--shadow)">
    <strong>üéâ You're on the waitlist.</strong>
    <div class="tiny" style="margin-top:.4rem;color:var(--muted);">
      Check your inbox for a confirmation email.
    </div>

    <button id="resetWaitlist"
            aria-label="Close and reset"
            title="Done"
            style="position:absolute;right:.6rem;bottom:.6rem;width:36px;height:36px;
                   border-radius:50%;border:1px solid var(--border);background:var(--bg-soft);
                   color:var(--text);display:grid;place-items:center;font-weight:800;
                   cursor:pointer;box-shadow:var(--shadow);transition:transform .12s ease;">
      ‚úì
    </button>
  </div>
`;

// Wire the reset button to reload the page
document.getElementById('resetWaitlist')?.addEventListener('click', () => {
  window.location.reload();
});
  } catch (err) {
    console.error("[Waitlist] error:", err);
    waitlistBtn.disabled = false;
    waitlistBtn.textContent = "Get Early Access";
    alert("Sorry‚Äîsomething went wrong. Please try again.");
  }
});

  // Elements
const authLinks        = document.getElementById('authLinks');        // desktop "Login ‚Ä¢ Register"
const mobileAuthLinks  = document.getElementById('mobileAuthLinks');  // mobile wrapper
const userMenu         = document.getElementById('userMenu');         // profile circle wrapper
const profileBtn       = document.getElementById('profileBtn');
const profileMenu      = document.getElementById('profileMenu');
const logoutBtnEl      = () => document.getElementById('logoutBtn');

// helpers
function hide(el){ if (!el) return; el.hidden = true; el.style.display = 'none'; }
function show(el, display=''){ if (!el) return; el.hidden = false; el.style.display = display; }

// profile menu controls
function openProfileMenu(){ if (!profileMenu) return; profileMenu.removeAttribute('hidden'); profileBtn?.setAttribute('aria-expanded','true'); }
function closeProfileMenu(){ if (!profileMenu) return; profileMenu.setAttribute('hidden',''); profileBtn?.setAttribute('aria-expanded','false'); }
closeProfileMenu(); // default closed

// UI states
function setLoggedOut(){
  show(authLinks, 'inline-flex');           // desktop auth links
  show(mobileAuthLinks, '');                // mobile auth links (block)
  hide(userMenu);                           // hide profile circle
  closeProfileMenu();
}
function setLoggedIn(initial){
  hide(authLinks);                          // hide desktop auth links
  hide(mobileAuthLinks);                    // hide mobile auth links
  show(userMenu, '');                       // show profile circle
  if (profileBtn && initial) profileBtn.textContent = initial;
  closeProfileMenu();
}

// Toggle dropdown
profileBtn?.addEventListener('click', (e) => {
  e.stopPropagation();
  if (profileMenu?.hasAttribute('hidden')) openProfileMenu(); else closeProfileMenu();
});
document.addEventListener('click', (e) => {
  if (!profileBtn?.contains(e.target) && !profileMenu?.contains(e.target)) closeProfileMenu();
});
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeProfileMenu(); });

// Auth state
auth.onAuthStateChanged(async (user) => {
  if (user) {
    try {
      const doc = await db.collection("users").doc(user.uid).get();
      const username = doc.exists ? (doc.data().username || 'U') : 'U';
      const initial  = String(username).charAt(0).toUpperCase() || 'U';
      setLoggedIn(initial);
    } catch (e) {
      console.error('[Auth] Failed to get user doc:', e);
      setLoggedIn('U');
    }
    // wire logout (only item in dropdown)
    const ensureLogout = () => {
      const btn = logoutBtnEl();
      if (btn && !btn.dataset.wired) {
        btn.dataset.wired = '1';
        btn.addEventListener('click', async () => {
          await auth.signOut();
          setLoggedOut();
          window.location.href = '/';
        });
      }
    };
    ensureLogout();
    profileBtn?.addEventListener('click', ensureLogout);
  } else {
    setLoggedOut();
  }
});

// Close mobile menu when an in-page anchor is tapped
mobile?.querySelectorAll('a[href^="#"]').forEach(a => {
  a.addEventListener('click', () => {
    mobile.setAttribute('hidden', '');
    burger.setAttribute('aria-expanded', 'false');
    document.body.classList.remove('no-scroll');
  });
});

// If any link targets #waitlist, focus the email box after scroll
document.querySelectorAll('a[href="#waitlist"]').forEach(a => {
  a.addEventListener('click', () => {
    // small delay so focus happens after scroll ends
    setTimeout(() => document.getElementById('email')?.focus(), 300);
  });
});
  </script>
</body>
</html>